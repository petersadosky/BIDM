*------------------------------------------------------------*;
* EM Version: 12.3;
* SAS Release: 9.04.01M0P061913;
* Host: VANDREW-023;
* Project Path: \\andrew.ad.cmu.edu\users\users15\psadosky\Documents;
* Project Name: yelp;
* Diagram Id: EMWS1;
* Diagram Name: yelp;
* Generated by: psadosky;
* Date: 01MAR2015:00:59:44;
*------------------------------------------------------------*;
*------------------------------------------------------------*;
* Macro Variables;
*------------------------------------------------------------*;
%let EM_PROJECT =;
%let EM_PROJECTNAME =;
%let EM_WSNAME =;
%let EM_WSDESCRIPTION =yelp;
%let EM_SUMMARY =WORK.SUMMARY;
%let EM_NUMTASKS =SINGLE;
%let EM_EDITMODE =R;
%let EM_DEBUGVAL =;
%let EM_ACTION =run;
*------------------------------------------------------------*;
%macro em_usedatatable;
%if ^%symexist(EM_USEDATATABLE) %then %do;
%let EM_USEDATATABLE = Y;
%end;
%if "&EM_USEDATATABLE" ne "N" %then %do;
*------------------------------------------------------------*;
* Data Tables;
*------------------------------------------------------------*;
*------------------------------------------------------------*;
%end;
%mend em_usedatatable;
%em_usedatatable;
*------------------------------------------------------------*;
* Create workspace data set;
*------------------------------------------------------------*;
data workspace;
length property $64 value $200;
property= 'PROJECTLOCATION';
value= "&EM_PROJECT";
output;
property= 'PROJECTNAME';
value= "&EM_PROJECTNAME";
output;
property= 'WORKSPACENAME';
value= "&EM_WSNAME";
output;
property= 'WORKSPACEDESCRIPTION';
value= "&EM_WSDESCRIPTION";
output;
property= 'SUMMARYDATASET';
value= "&EM_SUMMARY";
output;
property= 'NUMTASKS';
value= "&EM_NUMTASKS";
output;
property= 'EDITMODE';
value= "&EM_EDITMODE";
output;
property= 'DEBUG';
value= "&EM_DEBUGVAL";
output;
run;
*------------------------------------------------------------*;
* Create nodes data set;
*------------------------------------------------------------*;
data nodes;
length id $12 component $32 description $64 X 8 Y 8 diagramID $32 parentID $32;
id= "Trans2";
component="Transform";
description= "Transform Variables";
diagramID="_ROOT_";
parentID="";
X=471;
Y=302;
output;
id= "FIMPORT2";
component="FileImport";
description= "Pittsburgh";
diagramID="_ROOT_";
parentID="";
X=194;
Y=304;
output;
id= "Clus2";
component="Cluster";
description= "Cluster";
diagramID="_ROOT_";
parentID="";
X=723;
Y=299;
output;
run;
*------------------------------------------------------------*;
* INTERACTION Data Set for Trans2;
*------------------------------------------------------------*;
*------------------------------------------------------------*;
* FORMULA Data Set for Trans2;
*------------------------------------------------------------*;
*------------------------------------------------------------*;
* EMNOTES File for Trans2;
*------------------------------------------------------------*;
data _null_;
if symget('sysscp')=:'WIN' then dsep='\';
else if symget('sysscp')=:'DNT' then dsep='\';
else dsep = '/';
filepath = pathname('work')!!dsep!!"Trans2_EMNOTES.txt";
call symput('DSPATH', filepath);
run;
data _null_;
filename dspath "&dspath" encoding="utf-8" NOBOM;
file dspath;
run;
*------------------------------------------------------------*;
* Variable Attributes for FIMPORT2;
*------------------------------------------------------------*;
data WORK.FIMPORT2_VariableAttribute;
length Variable $64 AttributeName $32 AttributeValue $64;
Variable='Categor_10';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='Categor_11';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='Category_1';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='Category_2';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='Category_3';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='Category_4';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='Category_5';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='Category_6';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='Category_7';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='Category_8';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='Category_9';
AttributeName="ROLE";
AttributeValue='TEXT';
Output;
Variable='FID';
AttributeName="ROLE";
AttributeValue='REJECTED';
Output;
Variable='FID_1';
AttributeName="ROLE";
AttributeValue='REJECTED';
Output;
Variable='Groups';
AttributeName="LEVEL";
AttributeValue='BINARY';
Output;
Variable='Latitude';
AttributeName="ROLE";
AttributeValue='REJECTED';
Output;
Variable='Longitude';
AttributeName="ROLE";
AttributeValue='REJECTED';
Output;
Variable='Lot';
AttributeName="LEVEL";
AttributeValue='BINARY';
Output;
Variable='Number_Rev';
AttributeName="ROLE";
AttributeValue='REJECTED';
Output;
Variable='OBJECTID';
AttributeName="ROLE";
AttributeValue='REJECTED';
Output;
Variable='PO_NAME';
AttributeName="ROLE";
AttributeValue='REJECTED';
Output;
Variable='Parking';
AttributeName="LEVEL";
AttributeValue='BINARY';
Output;
Variable='STATE';
AttributeName="ROLE";
AttributeValue='REJECTED';
Output;
Variable='Street';
AttributeName="ROLE";
AttributeValue='REJECTED';
Output;
Variable='Street';
AttributeName="LEVEL";
AttributeValue='BINARY';
Output;
Variable='Valet';
AttributeName="LEVEL";
AttributeValue='BINARY';
Output;
Variable='Validated';
AttributeName="LEVEL";
AttributeValue='BINARY';
Output;
Variable='Wheelchair';
AttributeName="LEVEL";
AttributeValue='BINARY';
Output;
run;
*------------------------------------------------------------*;
* USERTRAINCODE File for FIMPORT2;
*------------------------------------------------------------*;
data _null_;
if symget('sysscp')=:'WIN' then dsep='\';
else if symget('sysscp')=:'DNT' then dsep='\';
else dsep = '/';
filepath = pathname('work')!!dsep!!"FIMPORT2_USERTRAINCODE.sas";
call symput('DSPATH', filepath);
run;
data _null_;
filename dspath "&dspath";
file dspath;
run;
*------------------------------------------------------------*;
* VARIABLESETDELTA File for FIMPORT2;
*------------------------------------------------------------*;
data _null_;
if symget('sysscp')=:'WIN' then dsep='\';
else if symget('sysscp')=:'DNT' then dsep='\';
else dsep = '/';
filepath = pathname('work')!!dsep!!"FIMPORT2_VARIABLESETDELTA.txt";
call symput('DSPATH', filepath);
run;
data _null_;
filename dspath "&dspath";
file dspath;
put 'if NAME="Category_1" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Category_2" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Category_3" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Category_4" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Category_5" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Category_6" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Category_7" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Category_8" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Category_9" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Categor_10" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Categor_11" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="FID" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="FID_1" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Groups" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Latitude" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="INTERVAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Longitude" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="INTERVAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Lot" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Number_Rev" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="INTERVAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="OBJECTID" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Parking" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="PO_NAME" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="STATE" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Street" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Valet" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Validated" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
put 'if NAME="Wheelchair" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'DROP="N";';
put 'end;';
run;
*------------------------------------------------------------*;
* DELTACODE File for FIMPORT2;
*------------------------------------------------------------*;
data _null_;
if symget('sysscp')=:'WIN' then dsep='\';
else if symget('sysscp')=:'DNT' then dsep='\';
else dsep = '/';
filepath = pathname('work')!!dsep!!"FIMPORT2_DELTACODE.txt";
call symput('DSPATH', filepath);
run;
data _null_;
filename dspath "&dspath";
file dspath;
put 'if NAME="Category_1" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Category_2" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Category_3" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Category_4" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Category_5" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Category_6" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Category_7" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Category_8" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Category_9" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Categor_10" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Categor_11" then do;';
put 'ROLE="TEXT";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="FID" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="FID_1" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Groups" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Latitude" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="INTERVAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Longitude" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="INTERVAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Lot" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Number_Rev" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="INTERVAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="OBJECTID" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Parking" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'end;';
put 'if NAME="PO_NAME" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="STATE" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="NOMINAL";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Street" then do;';
put 'ROLE="REJECTED";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Valet" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Validated" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'end;';
put 'if NAME="Wheelchair" then do;';
put 'ROLE="INPUT";';
put 'LEVEL="BINARY";';
put 'ORDER="";';
put 'end;';
put 'drop DROP;';
run;
*------------------------------------------------------------*;
* EMNOTES File for FIMPORT2;
*------------------------------------------------------------*;
data _null_;
if symget('sysscp')=:'WIN' then dsep='\';
else if symget('sysscp')=:'DNT' then dsep='\';
else dsep = '/';
filepath = pathname('work')!!dsep!!"FIMPORT2_EMNOTES.txt";
call symput('DSPATH', filepath);
run;
data _null_;
filename dspath "&dspath" encoding="utf-8" NOBOM;
file dspath;
run;
*------------------------------------------------------------*;
* EMNOTES File for Clus2;
*------------------------------------------------------------*;
data _null_;
if symget('sysscp')=:'WIN' then dsep='\';
else if symget('sysscp')=:'DNT' then dsep='\';
else dsep = '/';
filepath = pathname('work')!!dsep!!"Clus2_EMNOTES.txt";
call symput('DSPATH', filepath);
run;
data _null_;
filename dspath "&dspath" encoding="utf-8" NOBOM;
file dspath;
run;
*------------------------------------------------------------*;
* Create node properties data set;
*------------------------------------------------------------*;
data nodeprops;
length id $12 property $64 value $400;
id= "Trans2";
property="DefaultMethod";
value= "NONE";
output;
id= "Trans2";
property="DefaultTargetMethod";
value= "NONE";
output;
id= "Trans2";
property="DefaultClassMethod";
value= "DUMMY";
output;
id= "Trans2";
property="DefaultClassTargetMethod";
value= "NONE";
output;
id= "Trans2";
property="Offset";
value= "1";
output;
id= "Trans2";
property="MinOffset";
value= "Y";
output;
id= "Trans2";
property="HideVariable";
value= "Y";
output;
id= "Trans2";
property="RejectVariable";
value= "Y";
output;
id= "Trans2";
property="GroupCutoff";
value= "0.1";
output;
id= "Trans2";
property="GroupMissing";
value= "N";
output;
id= "Trans2";
property="EmRandomSeed";
value= "12345";
output;
id= "Trans2";
property="EmSampleSize";
value= "DEFAULT";
output;
id= "Trans2";
property="EmSampleMethod";
value= "FIRSTN";
output;
id= "Trans2";
property="MissingValue";
value= "USEINSEARCH";
output;
id= "Trans2";
property="SummaryVariables";
value= "TRANSFORMED";
output;
id= "Trans2";
property="SummaryStatistics";
value= "Y";
output;
id= "Trans2";
property="UseMetaTransform";
value= "Y";
output;
id= "Trans2";
property="MissingAsLevel";
value= "N";
output;
id= "Trans2";
property="NumberofBins";
value= "VARIABLES";
output;
id= "Trans2";
property="MaxOptimalBins";
value= "4";
output;
id= "Trans2";
property="ForceRun";
value= "N";
output;
id= "Trans2";
property="RunAction";
value= "Train";
output;
id= "Trans2";
property="Component";
value= "Transform";
output;
id= "Trans2";
property="EM_FILE_EMNOTES";
value= "Trans2_EMNOTES.txt";
output;
id= "FIMPORT2";
property="Location";
value= "CATALOG";
output;
id= "FIMPORT2";
property="Catalog";
value= "SASHELP.EMSAMP.FIMPORT.SOURCE";
output;
id= "FIMPORT2";
property="ImportType";
value= "Local";
output;
id= "FIMPORT2";
property="GuessRows";
value= "500";
output;
id= "FIMPORT2";
property="Delimiter";
value= ",";
output;
id= "FIMPORT2";
property="NameRow";
value= "Y";
output;
id= "FIMPORT2";
property="SkipRows";
value= "0";
output;
id= "FIMPORT2";
property="MaxRows";
value= "1000000";
output;
id= "FIMPORT2";
property="MaxCols";
value= "10000";
output;
id= "FIMPORT2";
property="FileType";
value= "csv";
output;
id= "FIMPORT2";
property="Role";
value= "TRAIN";
output;
id= "FIMPORT2";
property="ForceRun";
value= "N";
output;
id= "FIMPORT2";
property="Summarize";
value= "N";
output;
id= "FIMPORT2";
property="AdvancedAdvisor";
value= "N";
output;
id= "FIMPORT2";
property="RunAction";
value= "Train";
output;
id= "FIMPORT2";
property="Component";
value= "FileImport";
output;
id= "FIMPORT2";
property="IFileName";
value= "\\andrew.ad.cmu.edu\users\users15\psadosky\Downloads\just-pittsburgh.csv";
output;
id= "FIMPORT2";
property="AccessTable";
value= "NoTableName";
output;
id= "FIMPORT2";
property="UserID";
value= "NoUserID";
output;
id= "FIMPORT2";
property="Password";
value= "NoPassword";
output;
id= "FIMPORT2";
property="ToolType";
value= "SAMPLE";
output;
id= "FIMPORT2";
property="ToolPrefix";
value= "FIMPORT";
output;
id= "FIMPORT2";
property="EM_VARIABLEATTRIBUTES";
value= "WORK.FIMPORT2_VariableAttribute";
output;
id= "FIMPORT2";
property="EM_FILE_USERTRAINCODE";
value= "FIMPORT2_USERTRAINCODE.sas";
output;
id= "FIMPORT2";
property="EM_FILE_VARIABLESETDELTA";
value= "FIMPORT2_VARIABLESETDELTA.txt";
output;
id= "FIMPORT2";
property="EM_FILE_DELTACODE";
value= "FIMPORT2_DELTACODE.txt";
output;
id= "FIMPORT2";
property="EM_FILE_EMNOTES";
value= "FIMPORT2_EMNOTES.txt";
output;
id= "Clus2";
property="Bins";
value= "100";
output;
id= "Clus2";
property="Clusvar";
value= "_SEGMENT_";
output;
id= "Clus2";
property="ClusvarLabel";
value= "Segment Variable";
output;
id= "Clus2";
property="ClusvarRole";
value= "ID";
output;
id= "Clus2";
property="MaxC";
value= "250";
output;
id= "Clus2";
property="NominalEncoding";
value= "GLM";
output;
id= "Clus2";
property="OrdinalEncoding";
value= "RANK";
output;
id= "Clus2";
property="MissingInterval";
value= "DEFAULT";
output;
id= "Clus2";
property="MissingNominal";
value= "DEFAULT";
output;
id= "Clus2";
property="MissingOrdinal";
value= "DEFAULT";
output;
id= "Clus2";
property="ImputationMethod";
value= "NONE";
output;
id= "Clus2";
property="HideVariable";
value= "Y";
output;
id= "Clus2";
property="TrainDefaults";
value= "Y";
output;
id= "Clus2";
property="Learn";
value= ".";
output;
id= "Clus2";
property="LearnInitial";
value= "0.5";
output;
id= "Clus2";
property="LearnFinal";
value= "0.02";
output;
id= "Clus2";
property="LearnSteps";
value= "1000";
output;
id= "Clus2";
property="MaxIter";
value= "10";
output;
id= "Clus2";
property="MaxSteps";
value= "1200";
output;
id= "Clus2";
property="XConv";
value= "0.0001";
output;
id= "Clus2";
property="Initial";
value= "DEFAULT";
output;
id= "Clus2";
property="Drift";
value= "N";
output;
id= "Clus2";
property="Radius";
value= "0";
output;
id= "Clus2";
property="Stdize";
value= "STD";
output;
id= "Clus2";
property="Summary";
value= "N";
output;
id= "Clus2";
property="TreeProfile";
value= "Y";
output;
id= "Clus2";
property="ClusterGraphs";
value= "Y";
output;
id= "Clus2";
property="NumberClusterMethod";
value= "AUTOMATIC";
output;
id= "Clus2";
property="DistancePlot";
value= "Y";
output;
id= "Clus2";
property="FinalMaxNum";
value= "20";
output;
id= "Clus2";
property="AutomaticMaxNum";
value= "50";
output;
id= "Clus2";
property="AutomaticMinNum";
value= "2";
output;
id= "Clus2";
property="AutomaticMethod";
value= "WARD";
output;
id= "Clus2";
property="CCCCutOff";
value= "3";
output;
id= "Clus2";
property="ForceRun";
value= "N";
output;
id= "Clus2";
property="RunAction";
value= "Train";
output;
id= "Clus2";
property="Component";
value= "Cluster";
output;
id= "Clus2";
property="EM_FILE_EMNOTES";
value= "Clus2_EMNOTES.txt";
output;
run;
*------------------------------------------------------------*;
* Create connections data set;
*------------------------------------------------------------*;
data connect;
length from to $12;
from="Trans2";
to="Clus2";
output;
from="FIMPORT2";
to="Trans2";
output;
run;
*------------------------------------------------------------*;
* Create actions to run data set;
*------------------------------------------------------------*;
%macro emaction;
%let actionstring = %upcase(&EM_ACTION);
%if %index(&actionstring, RUN) or %index(&actionstring, REPORT) %then %do;
data actions;
length id $12 action $40;
id="Clus2";
%if %index(&actionstring, RUN) %then %do;
action='run';
output;
%end;
%if %index(&actionstring, REPORT) %then %do;
action='report';
output;
%end;
run;
%end;
%mend;
%emaction;
*------------------------------------------------------------*;
* Execute the actions;
*------------------------------------------------------------*;
%em5batch(execute, workspace=workspace, nodes=nodes, connect=connect, datasources=datasources, nodeprops=nodeprops, action=actions);
